{"version":3,"sources":["webpack:///./src/pages/goodsList/addImage.vue?ccd3","webpack:///src/pages/goodsList/addImage.vue","webpack:///./src/pages/goodsList/addImage.vue?d30a","webpack:///./src/pages/goodsList/addImage.vue","webpack:///./src/pages/goodsList/addImage.vue?58ea"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","titlename","ref","model","ruleForm","rules","label-width","label","prop","value","callback","$$v","$set","expression","src","cover","alt","_e","for","type","size","_v","id","accept","on","change","uploadLogo","click","$event","submitForm","$router","push","name","staticRenderFns","addImagevue_type_script_lang_js_","[object Object]","validCover","item","Error","sorting","description","required","message","trigger","max","validator","isAdd","$route","query","$http","post","then","res","err","element_ui_common","error","msg","methods","formName","$refs","validate","valid","addEdit","url","success","setTimeout","event","Promise","resolve","reject","target","files","length","formData","FormData","append","file","imgUrl","image","uploadFile","logo","areaLogo","goodsList_addImagevue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_addImage_vue_vue_type_style_index_0_id_8d5bcf6a_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_addImage_vue_vue_type_style_index_0_id_8d5bcf6a_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"assets/js/chunk-550f0622.2bfc1b58.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addImage global_div\"},[_c('content-top',{attrs:{\"titlename\":\"添加属性\"}}),_c('div',{staticClass:\"center_div\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"form\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"相册名称: \",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.ruleForm.name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"name\", $$v)},expression:\"ruleForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"相册封面: \",\"prop\":\"cover\"}},[(_vm.ruleForm.cover)?_c('img',{staticClass:\"form-img\",attrs:{\"src\":_vm.ruleForm.cover,\"alt\":\"\"}}):_vm._e(),_c('div',{staticClass:\"upload-btn-wrap\"},[_c('label',{attrs:{\"for\":\"upload\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"上传图片\")])],1),_c('input',{staticClass:\"upload-input\",attrs:{\"id\":\"upload\",\"type\":\"file\",\"accept\":\"image/jpeg, image/png\"},on:{\"change\":_vm.uploadLogo}}),_c('p',{staticClass:\"form-tips\"},[_vm._v(\"只能上传jpg/png格式文件，文件不能超过50kb\")])])]),_c('el-form-item',{attrs:{\"label\":\"排序: \",\"prop\":\"sorting\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.ruleForm.sorting),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"sorting\", $$v)},expression:\"ruleForm.sorting\"}})],1),_c('el-form-item',{attrs:{\"label\":\"相册描述: \",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.ruleForm.description),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"description\", $$v)},expression:\"ruleForm.description\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}},[_vm._v(\"提交\")]),_c('el-button',{on:{\"click\":function($event){_vm.$router.push({name:'goodsimage'})}}},[_vm._v(\"返回\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"addImage global_div\">\r\n    <content-top titlename=\"添加属性\"></content-top>\r\n    <div class=\"center_div\">\r\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"150px\" class=\"form\">\r\n            <el-form-item label=\"相册名称: \" prop=\"name\">\r\n            <el-input v-model=\"ruleForm.name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"相册封面: \" prop=\"cover\">\r\n            <img :src=\"ruleForm.cover\" alt=\"\" class=\"form-img\" v-if=\"ruleForm.cover\">\r\n            <div class=\"upload-btn-wrap\">\r\n                <label for=\"upload\"><el-button type=\"primary\" size=\"small\">上传图片</el-button></label>\r\n                <input id=\"upload\" type=\"file\" class=\"upload-input\" accept=\"image/jpeg, image/png\" @change=\"uploadLogo\">\r\n                <p class=\"form-tips\">只能上传jpg/png格式文件，文件不能超过50kb</p>\r\n            </div>\r\n            </el-form-item>\r\n            <el-form-item label=\"排序: \" prop=\"sorting\">\r\n            <el-input v-model=\"ruleForm.sorting\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"相册描述: \" prop=\"description\">\r\n            <el-input type=\"textarea\" v-model=\"ruleForm.description\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n            <el-button @click=\"$router.push({name:'goodsimage'})\">返回</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {Message} from 'element-ui'\r\nexport default {\r\n    name: 'addimage',\r\n    data(){\r\n        let validCover = (item, value, callback) => {\r\n            if (!this.ruleForm.cover){\r\n                callback(new Error('请上传相册封面'));\r\n            }else{\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            ruleForm: {\r\n                name: '',\r\n                cover: '',\r\n                sorting: '',\r\n                description: '',\r\n            },\r\n            rules: {\r\n                name: [\r\n                    { required: true, message: '请输入相册名称', trigger: 'blur' },\r\n                    { max: 20, message: '长度必须小于20个字符', trigger: 'blur' }\r\n                ],\r\n                cover: [\r\n                    { validator: validCover, required: true, trigger: 'change' }\r\n                ],\r\n            },\r\n            isAdd:true\r\n        }\r\n    },\r\n    created() {\r\n      if (this.$route.query.id){\r\n        this.$http.post('merchant_goods_galleries/query_by_id',{\r\n            id: this.$route.query.id\r\n        },{type: 'form'}).then((res) => {\r\n            this.isAdd = false;\r\n            this.ruleForm.name=res.name;\r\n            this.ruleForm.cover=res.cover;\r\n            this.ruleForm.sorting=res.sorting;\r\n            this.ruleForm.description=res.description;\r\n        },(err) => {\r\n          Message.error(err.msg);\r\n        })\r\n      }\r\n    },\r\n    methods: {\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            if (this.isAdd){\r\n              this.addEdit(\"merchant_goods_galleries/add\");\r\n            } else {\r\n              this.ruleForm.id=this.$route.query.id;\r\n              this.addEdit(\"merchant_goods_galleries/update\");\r\n            }\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      addEdit(url){\r\n        this.$http.post(url, this.ruleForm).then(() => {\r\n          Message.success(\"提交成功\");\r\n          setTimeout(() => {\r\n            this.$router.push(\"/index/goodsimage\");\r\n          }, 500)\r\n        },(err) => {\r\n          Message.error(err.msg);\r\n        })\r\n      },\r\n        uploadFile(event){\r\n          return new Promise((resolve, reject) => {\r\n            if (event.target.files.length > 0){\r\n              let formData = new FormData();\r\n              formData.append('file', event.target.files[0]);\r\n              this.$http.post('merchant/upload_file', formData, {\r\n                type: 'form',\r\n                file: 'image'\r\n              }).then((res) => {\r\n                resolve({\r\n                  imgUrl: res.imgUrl + res.image\r\n                });\r\n              },(err) => {\r\n                Message.error(err.msg);\r\n                reject(err);\r\n              })\r\n            }\r\n          })\r\n        },\r\n        uploadLogo(file){\r\n          this.uploadFile(file).then((res) => {\r\n            this.ruleForm.logo=res.imgUrl;\r\n          })\r\n        },\r\n        uploadAreaLogo(file){\r\n          this.uploadFile(file).then((res) => {\r\n            this.ruleForm.areaLogo=res.imgUrl;\r\n          })\r\n        },\r\n    },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.addImage{\r\n    .form{\r\n        margin-top:20px;\r\n        width:600px;\r\n        .upload-btn-wrap{\r\n            position:relative;\r\n            .upload-input{\r\n                position: absolute;\r\n                left: 0;\r\n                top: 4px;\r\n                width: 80px;\r\n                height: 32px;\r\n                opacity: 0;\r\n                z-index: 3;\r\n                cursor: pointer;\r\n            }\r\n        }\r\n        .form-img{\r\n          width:150px;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addImage.vue?vue&type=template&id=8d5bcf6a&scoped=true&\"\nimport script from \"./addImage.vue?vue&type=script&lang=js&\"\nexport * from \"./addImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addImage.vue?vue&type=style&index=0&id=8d5bcf6a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8d5bcf6a\",\n  null\n  \n)\n\ncomponent.options.__file = \"addImage.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addImage.vue?vue&type=style&index=0&id=8d5bcf6a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addImage.vue?vue&type=style&index=0&id=8d5bcf6a&lang=less&scoped=true&\""],"sourceRoot":""}