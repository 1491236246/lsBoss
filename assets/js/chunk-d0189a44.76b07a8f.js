(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d0189a44"],{"9a2f":function(t,e,s){"use strict";var i=s("9d64"),a=s.n(i);a.a},"9d64":function(t,e,s){},fb84:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderdetail global_div"},[s("content-top",{attrs:{titlename:"订单详情"}}),s("div",{staticClass:"center_div"},[s("el-steps",{staticStyle:{"margin-bottom":"30px"},attrs:{active:t.datalist.status,"align-center":"","finish-status":"success"}},[s("el-step",{attrs:{title:"提交订单",description:t.datalist.creatTime}}),s("el-step",{attrs:{title:"支付订单",description:t.datalist.finishTime}}),s("el-step",{attrs:{title:"平台发货",description:t.datalist.sendEndTime}}),s("el-step",{attrs:{title:"确认收货",description:t.datalist.creatTime}}),s("el-step",{attrs:{title:"完成评价",description:t.datalist.finishEndTime}})],1),s("div",{staticClass:"order-info clearFix"},[s("p",{staticClass:"fl"},[s("i",{staticClass:"el-icon-warning font-15 red"}),s("span",{staticClass:"font-15 red"},[t._v("当前订单状态: "+t._s(t._f("getOrderStatus")(t.datalist.status)))])]),s("div",{staticClass:"fr"},[s("el-button",{on:{click:function(e){t.dialogVisible=!0,t.dialogStatus=1,t.title="修改收货人信息"}}},[t._v("修改收货人信息")]),1==t.datalist.status?s("el-button",{on:{click:t.close}},[t._v("关闭订单")]):t._e(),s("el-button",{on:{click:function(e){t.dialogVisible=!0,t.dialogStatus=2,t.title="备注订单"}}},[t._v("备注订单")]),s("el-button",{on:{click:function(e){t.$router.push({name:"orderList"})}}},[t._v("返回")])],1)]),s("div",{staticClass:"table flex"},[s("p",{staticClass:"title"},[t._v("基本信息")]),s("div",[s("div",[t._v("订单id")]),s("div",[t._v(t._s(t.datalist.id))])]),s("div",[s("div",[t._v("订单编号")]),s("div",[t._v(t._s(t.datalist.code))])]),s("div",[s("div",[t._v("用户账号")]),s("div",[t._v(t._s(t.mobilePhone))])]),t._m(0),t._m(1),s("div",[s("div",[t._v("订单类型")]),s("div",[t._v(t._s(1==t.datalist.type?"普通类型":"限时秒杀"))])]),s("div",[s("div",[t._v("配送方式")]),s("div",[t._v(t._s(t.datalist.sendCompany))])]),s("div",[s("div",[t._v("物流单号")]),s("div",[t._v(t._s(t.datalist.sendCode))])]),s("div",[s("div",[t._v("自动确认收货时间")]),s("div",[t._v(t._s(t.datalist.finishEndTime))])])]),s("p",{staticClass:"el-title"},[t._v("商品信息")]),s("el-table",{staticClass:"mall-table",attrs:{data:t.datalist.details}},[s("el-table-column",{attrs:{label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("img",{attrs:{src:t.row.goodsPic.split(",")[0]}})]}}])}),s("el-table-column",{attrs:{label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.goodsName))]}}])}),s("el-table-column",{attrs:{label:"价格/货号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.goodsPrice)+"/"+t._s(e.row.goodsNo))]}}])}),s("el-table-column",{attrs:{label:"属性"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.goodsDesc))]}}])}),s("el-table-column",{attrs:{label:"数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.buyNum))])]}}])}),s("el-table-column",{attrs:{label:"品牌"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.goodsBrand))])]}}])}),s("el-table-column",{attrs:{label:"小计"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.totalMoney))])]}}])})],1),s("div",{staticClass:"table flex"},[s("p",{staticClass:"title"},[t._v("费用信息")]),s("div",[s("div",[t._v("商品合计")]),s("div",[t._v(t._s(t.datalist.totalMoeny))])]),t._m(2),s("div",[s("div",[t._v("订单总金额")]),s("div",[t._v(t._s(t.datalist.totalMoeny))])]),s("div",[s("div",[t._v("应付款金额")]),s("div",[t._v(t._s(t.datalist.totalMoeny))])])]),s("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,"append-to-body":!0,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{ref:"ruleForm",staticClass:"form",attrs:{model:t.ruleForm,rules:t.rules1,"label-width":"100px"}},[1==t.dialogStatus?s("div",[s("el-form-item",{attrs:{label:"收货人姓名: ",prop:"receiver"}},[s("el-input",{model:{value:t.ruleForm.receiver,callback:function(e){t.$set(t.ruleForm,"receiver",e)},expression:"ruleForm.receiver"}})],1),s("el-form-item",{attrs:{label:"手机号码: ",prop:"phone"}},[s("el-input",{model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1),s("el-form-item",{attrs:{label:"详细地址: ",prop:"address"}},[s("el-input",{model:{value:t.ruleForm.address,callback:function(e){t.$set(t.ruleForm,"address",e)},expression:"ruleForm.address"}})],1)],1):t._e(),2==t.dialogStatus?s("div",[s("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"操作备注: "}},[s("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.mechantRemark,callback:function(e){t.mechantRemark=e},expression:"mechantRemark"}})],1)],1):t._e()]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"mall-btn",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{staticClass:"mall-btn active",on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[t._v("支付方式")]),s("div",[t._v("微信小程序支付")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[t._v("订单来源")]),s("div",[t._v("小程序")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[t._v("运费")]),s("div",[t._v("包邮")])])}],r=s("5c96"),l={name:"orderdetail",data(){return{datalist:{},title:"修改收货人信息",mechantRemark:"",dialogVisible:!1,dialogStatus:1,mobilePhone:"",ruleForm:{},rules1:{receiver:[{required:!0,message:"请输入收货人姓名",trigger:"blur"},{max:20,message:"长度必须小于20个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{max:11,message:"请输入正确的手机号",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},rules2:{mechantRemark:[{required:!0,message:"请输入订单备注",trigger:"blur"}]}}},created(){this.getOrderInfo()},methods:{getOrderInfo(){this.$http.post("merchant_order/query_By_Id",{id:this.$route.query.id,merchantId:JSON.parse(localStorage.userInfo).merchantId}).then(t=>{this.datalist=t,this.ruleForm.receiver=t.receiver,this.ruleForm.phone=t.phone,this.ruleForm.address=t.address,this.ruleForm.id=t.id},t=>{r["Message"].error(t.msg)})},close(){this.$confirm("确定关闭订单嘛","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{this.$http.post("/merchant_order/update",{id:this.$route.query.id,status:0}).then(()=>{this.getOrderInfo(),r["Message"].success("关闭成功")})})},submitForm(t){1==this.dialogStatus?this.$refs[t].validate(t=>{if(!t)return!1;this.$http.post("merchant_order/updateOrder",this.ruleForm).then(()=>{this.getOrderInfo(),r["Message"].success("操作成功"),this.dialogVisible=!1},t=>{r["Message"].error(t.msg)})}):this.$http.post("merchant_order/updateOrder",{id:this.ruleForm.id,mechantRemark:this.mechantRemark}).then(()=>{this.getOrderInfo(),this.$msgSuc("操作成功"),this.dialogVisible=!1},t=>{this.$msgErr(t.msg)})}},filters:{getOrderStatus:function(t){const e={0:"已关闭",1:"待付款",2:"待发货",3:"待收货",4:"待评价",5:"已完成"};return e[t]}}},o=l,d=(s("9a2f"),s("2877")),n=Object(d["a"])(o,i,a,!1,null,"621f8a9e",null);n.options.__file="orderDetail.vue";e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-d0189a44.76b07a8f.js.map