(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e775851"],{"31f0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"global_div proAddheader"},[r("content-top",{attrs:{titlename:"添加类目"}}),r("div",{staticClass:"center_div"},[r("el-form",{ref:"ruleForm",staticClass:"form",staticStyle:{width:"600px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"类目名称: ",prop:"navName"}},[r("el-input",{model:{value:e.ruleForm.navName,callback:function(t){e.$set(e.ruleForm,"navName","string"===typeof t?t.trim():t)},expression:"ruleForm.navName"}})],1),r("el-form-item",{attrs:{label:"上级类目: ",prop:"parentId"}},[r("el-select",{attrs:{disabled:e.isChild,placeholder:"请选择分类"},model:{value:e.ruleForm.parentId,callback:function(t){e.$set(e.ruleForm,"parentId",t)},expression:"ruleForm.parentId"}},e._l(e.headerList,function(e){return r("el-option",{attrs:{label:e.navName,value:e.id}})}),1),e.isChild?e._e():r("p",{staticClass:"form-tips"},[e._v("不选择分类默认为顶级分类")])],1),r("el-form-item",{attrs:{label:"排序: ",prop:"navSort"}},[r("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.navSort,callback:function(t){e.$set(e.ruleForm,"navSort",t)},expression:"ruleForm.navSort"}})],1),r("el-form-item",{attrs:{label:"是否显示: ",prop:"status"}},[r("el-radio-group",{model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[r("el-radio",{attrs:{label:"0"}},[e._v("显示")]),r("el-radio",{attrs:{label:"1"}},[e._v("不显示")])],1)],1),e.isChild?e._e():r("el-form-item",{attrs:{label:"类目图标: ",prop:"navIcon"}},[e.ruleForm.navIcon?r("img",{staticClass:"form-img",attrs:{src:e.ruleForm.navIcon,alt:""}}):e._e(),r("div",{staticClass:"upload-btn-wrap"},[r("label",{attrs:{for:"upload"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1),r("input",{staticClass:"upload-input",attrs:{id:"upload",type:"file",accept:"image/jpeg, image/png"},on:{change:e.uploadNavIcon}}),r("p",{staticClass:"form-tips"},[e._v("建议图标尺寸为18*18比例，图片只能为jpg、png格式")])])]),r("el-form-item",{attrs:{label:"类目描述: ",prop:"navDesc"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.navDesc,callback:function(t){e.$set(e.ruleForm,"navDesc",t)},expression:"ruleForm.navDesc"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.$router.push({name:"proheader"})}}},[e._v("返回")])],1)],1)],1)],1)},s=[],i=r("5c96"),l={name:"index",data(){let e=(e,t,r)=>{this.ruleForm.navIcon||this.isChild?r():r(new Error("请上传类目图标"))};return{headerList:[{id:0,navName:"顶级类目"}],isChild:!1,ruleForm:{navName:"",parentId:0,navSort:"",status:"0",navIcon:"",navDesc:""},rules:{navName:[{required:!0,message:"请输入分类名称",trigger:"blur"},{max:20,message:"长度必须小于20个字符",trigger:"blur"}],navIcon:[{validator:e,trigger:"change"}]},loading:!1,submitLoading:!1}},created(){this.$http.post("merchantNavigation/query_navigation_type_tree",{}).then(e=>{this.headerList=[...this.headerList,...e],this.$route.query.parentId&&(this.$set(this.ruleForm,"parentId",Number(this.$route.query.parentId)),this.isChild=!0)})},methods:{submitForm(e){this.$refs[e].validate(e=>{if(!e)return!1;this.submitLoading=!0,this.addEdit("merchantNavigation/merchant_navigation_add")})},uploadFile(e){return new Promise((t,r)=>{if(e.target.files.length>0){let a=new FormData;a.append("file",e.target.files[0]),this.$http.post("merchant/upload_file",a,{type:"form",file:"image"}).then(e=>{t({imgUrl:e.imgUrl+e.image})},e=>{i["Message"].error(e.msg),r(e)})}})},uploadNavIcon(e){this.uploadFile(e).then(e=>{this.$set(this.ruleForm,"navIcon",e.imgUrl)})},addEdit(e){this.$http.post(e,this.ruleForm).then(()=>{i["Message"].success("操作成功"),setTimeout(()=>{this.$router.push("/promotion/header"),this.submitLoading=!1},500)},e=>{i["Message"].error(e.msg),this.submitLoading=!1})}}},o=l,n=(r("a0c9"),r("2877")),u=Object(n["a"])(o,a,s,!1,null,"171f4c48",null);u.options.__file="proAddheader.vue";t["default"]=u.exports},a0c9:function(e,t,r){"use strict";var a=r("c646"),s=r.n(a);s.a},c646:function(e,t,r){}}]);
//# sourceMappingURL=chunk-3e775851.b493121b.js.map